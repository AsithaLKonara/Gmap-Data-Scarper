{"version":3,"file":"Integrations-_CNOyMew.js","sources":["../../src/pages/Integrations.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Box, Heading, Text, HStack, Input, Button, VStack, useToast } from '@chakra-ui/react';\nimport { useTranslation } from 'react-i18next';\nimport { getCRMStatus, connectCRM, disconnectCRM, getWebhookUrl, testWebhook } from '../api';\nimport { Link as RouterLink } from 'react-router-dom';\n\nconst Integrations: React.FC = () => {\n  const { t } = useTranslation();\n  const toast = useToast();\n  const [crmStatus, setCrmStatus] = useState<any>(null);\n  const [crmLoading, setCrmLoading] = useState(false);\n  const [crmProvider, setCrmProvider] = useState('');\n  const [crmConfig, setCrmConfig] = useState({});\n  const [webhookUrl, setWebhookUrl] = useState('');\n  const [webhookLoading, setWebhookLoading] = useState(false);\n  const [testWebhookResult, setTestWebhookResult] = useState<string | null>(null);\n\n  useEffect(() => {\n    loadCRMStatus();\n    loadWebhookUrl();\n  }, []);\n\n  const loadCRMStatus = async () => {\n    try {\n      const status = await getCRMStatus();\n      setCrmStatus(status);\n    } catch {\n      setCrmStatus(null);\n    }\n  };\n\n  const loadWebhookUrl = async () => {\n    setWebhookLoading(true);\n    try {\n      const res = await getWebhookUrl();\n      setWebhookUrl(res.url || '');\n    } catch {\n      setWebhookUrl('');\n    } finally {\n      setWebhookLoading(false);\n    }\n  };\n\n  const handleConnectCRM = async (provider: string) => {\n    setCrmLoading(true);\n    try {\n      await connectCRM(provider);\n      setCrmStatus((s: any) => ({ ...s, crm_provider: provider, crm_connected: false }));\n      toast({ title: t('integrations.connectToProvider', 'Connect to {{provider}}', { provider }), description: t('integrations.oauthFlow', 'OAuth flow will start (stub)'), status: 'info' });\n    } catch (e: any) {\n      toast({ title: t('error', 'Error'), description: e.message, status: 'error' });\n    } finally {\n      setCrmLoading(false);\n    }\n  };\n  const handleDisconnectCRM = async () => {\n    setCrmLoading(true);\n    try {\n      await disconnectCRM();\n      setCrmStatus(null);\n      toast({ title: t('integrations.disconnected', 'Disconnected'), status: 'info' });\n    } catch (e: any) {\n      toast({ title: t('error', 'Error'), description: e.message, status: 'error' });\n    } finally {\n      setCrmLoading(false);\n    }\n  };\n\n  const handleTestWebhook = async () => {\n    setWebhookLoading(true);\n    setTestWebhookResult(null);\n    try {\n      const res = await testWebhook();\n      setTestWebhookResult(res.message || 'Webhook test sent');\n      toast({ title: 'Test webhook sent', status: 'success' });\n    } catch (e: any) {\n      setTestWebhookResult(e.message || 'Webhook test failed');\n      toast({ title: 'Webhook test failed', description: e.message, status: 'error' });\n    } finally {\n      setWebhookLoading(false);\n    }\n  };\n\n  return (\n    <Box maxW=\"3xl\" mx=\"auto\" py={8}>\n      <Heading size=\"lg\" mb={6}>{t('integrations.title', 'Integrations')}</Heading>\n      <Text fontSize=\"md\" color=\"gray.600\" mb={8}>{t('integrations.description', 'Connect LeadTap to your favorite tools and platforms. Manage CRM, email marketing, and automation integrations below.')}</Text>\n\n      {/* CRM Integrations */}\n      <Box bg=\"white\" p={6} borderRadius=\"lg\" border=\"1px\" borderColor=\"gray.200\" boxShadow=\"md\" mb={8}>\n        <Heading size=\"md\" mb={2}>{t('integrations.crmIntegration', 'CRM Integration')}</Heading>\n        <Text fontSize=\"sm\" color=\"gray.600\" mb={2}>{t('integrations.crmDescription', 'Connect to external CRMs like HubSpot or Salesforce to sync leads and automate workflows.')}</Text>\n        <Text fontSize=\"sm\" mb={2}>{t('integrations.crmStatus', 'Status: {{status}}', { status: crmStatus ? (crmStatus.crm_connected ? `${t('integrations.connectedToProvider', 'Connected to {{provider}}', { provider: crmStatus.crm_provider })}` : `${t('integrations.notConnected', 'Not connected')}${crmStatus.crm_provider ? ` (${crmStatus.crm_provider})` : ''}`) : t('integrations.notConnected') })}</Text>\n        <HStack mb={2}>\n          <Button colorScheme=\"blue\" onClick={() => handleConnectCRM('hubspot')} isLoading={crmLoading} isDisabled={crmStatus?.crm_connected}>{t('integrations.connectHubspot', 'Connect HubSpot')}</Button>\n          <Button colorScheme=\"orange\" onClick={() => handleConnectCRM('salesforce')} isLoading={crmLoading} isDisabled={crmStatus?.crm_connected}>{t('integrations.connectSalesforce', 'Connect Salesforce')}</Button>\n          <Button colorScheme=\"red\" onClick={handleDisconnectCRM} isLoading={crmLoading} isDisabled={!crmStatus?.crm_connected}>{t('integrations.disconnect', 'Disconnect')}</Button>\n        </HStack>\n      </Box>\n\n      {/* Email Marketing Integrations */}\n      <Box bg=\"white\" p={6} borderRadius=\"lg\" border=\"1px\" borderColor=\"gray.200\" boxShadow=\"md\" mb={8}>\n        <Heading size=\"md\" mb={2}>{t('integrations.emailMarketing', 'Email Marketing')}</Heading>\n        <Text fontSize=\"sm\" color=\"gray.600\" mb={2}>{t('integrations.emailDescription', 'Connect to email marketing tools like Mailchimp to sync contacts and automate campaigns.')}</Text>\n        <HStack mb={2}>\n          <Button colorScheme=\"green\" onClick={() => handleConnectCRM('mailchimp')} isLoading={crmLoading} isDisabled={crmStatus?.email_connected}>{t('integrations.connectMailchimp', 'Connect Mailchimp')}</Button>\n        </HStack>\n      </Box>\n\n      {/* Zapier & Automation */}\n      <Box bg=\"white\" p={6} borderRadius=\"lg\" border=\"1px\" borderColor=\"gray.200\" boxShadow=\"md\" mb={8}>\n        <Heading size=\"md\" mb={2}>{t('integrations.zapier', 'Zapier & Automation')}</Heading>\n        <Text fontSize=\"sm\" color=\"gray.600\" mb={2}>{t('integrations.zapierDescription', 'Connect LeadTap to thousands of apps using Zapier. Automate workflows and sync data across platforms.')}</Text>\n        <Button colorScheme=\"yellow\" as=\"a\" href=\"https://zapier.com/apps/leadtap/integrations\" target=\"_blank\" rel=\"noopener noreferrer\" mb={4}>{t('integrations.connectZapier', 'Connect Zapier')}</Button>\n        <Box mt={4} mb={2}>\n          <Heading size=\"sm\" mb={1}>Available Webhook Events</Heading>\n          <VStack align=\"start\" spacing={1} fontSize=\"sm\">\n            <Text><b>lead.created</b> – Triggered when a new lead is created</Text>\n            <Text><b>job.completed</b> – Triggered when a job completes</Text>\n            <Text><b>lead.updated</b> – Triggered when a lead is updated</Text>\n            <Text><b>lead.deleted</b> – Triggered when a lead is deleted</Text>\n          </VStack>\n        </Box>\n        <Box mt={4} mb={2}>\n          <Heading size=\"sm\" mb={1}>Your Webhook URL</Heading>\n          <HStack>\n            <Input value={webhookUrl} isReadOnly size=\"sm\" width=\"auto\" isLoading={webhookLoading} />\n            <Button size=\"sm\" onClick={() => {navigator.clipboard.writeText(webhookUrl); toast({ title: 'Copied to clipboard', status: 'success' });}} disabled={!webhookUrl}>Copy</Button>\n          </HStack>\n        </Box>\n        <Button colorScheme=\"blue\" size=\"sm\" mt={2} mb={2} onClick={handleTestWebhook} isLoading={webhookLoading} disabled={!webhookUrl}>Test Webhook</Button>\n        {testWebhookResult && <Text fontSize=\"sm\" color=\"gray.600\" mt={1}>{testWebhookResult}</Text>}\n        <Box mt={4}>\n          <Button as=\"a\" href=\"/docs/api_examples#zapier\" target=\"_blank\" rel=\"noopener noreferrer\" variant=\"link\" colorScheme=\"blue\" size=\"sm\">Read Zapier Integration Guide</Button>\n        </Box>\n      </Box>\n\n      {/* Coming Soon / Placeholder for more integrations */}\n      <Box bg=\"white\" p={6} borderRadius=\"lg\" border=\"1px\" borderColor=\"gray.200\" boxShadow=\"md\" mb={8}>\n        <Heading size=\"md\" mb={2}>{t('integrations.moreComing', 'More Integrations Coming Soon')}</Heading>\n        <Text fontSize=\"sm\" color=\"gray.600\">{t('integrations.moreDescription', 'We are working on more integrations. Let us know what you want to see!')}</Text>\n      </Box>\n\n      <Button as={RouterLink} to=\"/settings\" variant=\"outline\">{t('integrations.backToSettings', 'Back to Settings')}</Button>\n    </Box>\n  );\n};\n\nexport default Integrations; "],"names":["Integrations","useTranslation","toast","useToast","crmStatus","setCrmStatus","useState","crmLoading","setCrmLoading","crmProvider","setCrmProvider","crmConfig","setCrmConfig","webhookUrl","setWebhookUrl","webhookLoading","setWebhookLoading","testWebhookResult","setTestWebhookResult","useEffect","loadCRMStatus","loadWebhookUrl","status","getCRMStatus","res","getWebhookUrl","handleConnectCRM","provider","connectCRM","s","e","handleDisconnectCRM","disconnectCRM","handleTestWebhook","testWebhook","Box","jsx","Heading","Text","jsxs","HStack","Button","VStack","Input","RouterLink"],"mappings":"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"}