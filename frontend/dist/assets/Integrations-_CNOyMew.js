import{u as R,r as i,j as e,L as T}from"./index-cuttc60L.js";import{getCRMStatus as v,getWebhookUrl as L,connectCRM as M,disconnectCRM as W,testWebhook as _}from"./index-CvLuV8mT.js";import{u as D,V as I,I as E}from"./use-toast-DpWWrysv.js";import{B as a,a as r}from"./button-D-CbrSAB.js";import{H as l,T as s}from"./text-D7Hreo_J.js";import{H as f}from"./h-stack-MdeSV0qw.js";import"./use-style-config-BvA8OEwb.js";import"./icon-BANxJJXO.js";const Y=()=>{const{t}=R(),c=D(),[o,d]=i.useState(null),[m,h]=i.useState(!1),[H,U]=i.useState(""),[Z,A]=i.useState({}),[g,j]=i.useState(""),[C,b]=i.useState(!1),[k,p]=i.useState(null);i.useEffect(()=>{w(),S()},[]);const w=async()=>{try{const n=await v();d(n)}catch{d(null)}},S=async()=>{b(!0);try{const n=await L();j(n.url||"")}catch{j("")}finally{b(!1)}},u=async n=>{h(!0);try{await M(n),d(x=>({...x,crm_provider:n,crm_connected:!1})),c({title:t("integrations.connectToProvider","Connect to {{provider}}",{provider:n}),description:t("integrations.oauthFlow","OAuth flow will start (stub)"),status:"info"})}catch(x){c({title:t("error","Error"),description:x.message,status:"error"})}finally{h(!1)}},y=async()=>{h(!0);try{await W(),d(null),c({title:t("integrations.disconnected","Disconnected"),status:"info"})}catch(n){c({title:t("error","Error"),description:n.message,status:"error"})}finally{h(!1)}},z=async()=>{b(!0),p(null);try{const n=await _();p(n.message||"Webhook test sent"),c({title:"Test webhook sent",status:"success"})}catch(n){p(n.message||"Webhook test failed"),c({title:"Webhook test failed",description:n.message,status:"error"})}finally{b(!1)}};return e.jsxs(a,{maxW:"3xl",mx:"auto",py:8,children:[e.jsx(l,{size:"lg",mb:6,children:t("integrations.title","Integrations")}),e.jsx(s,{fontSize:"md",color:"gray.600",mb:8,children:t("integrations.description","Connect LeadTap to your favorite tools and platforms. Manage CRM, email marketing, and automation integrations below.")}),e.jsxs(a,{bg:"white",p:6,borderRadius:"lg",border:"1px",borderColor:"gray.200",boxShadow:"md",mb:8,children:[e.jsx(l,{size:"md",mb:2,children:t("integrations.crmIntegration","CRM Integration")}),e.jsx(s,{fontSize:"sm",color:"gray.600",mb:2,children:t("integrations.crmDescription","Connect to external CRMs like HubSpot or Salesforce to sync leads and automate workflows.")}),e.jsx(s,{fontSize:"sm",mb:2,children:t("integrations.crmStatus","Status: {{status}}",{status:o?o.crm_connected?`${t("integrations.connectedToProvider","Connected to {{provider}}",{provider:o.crm_provider})}`:`${t("integrations.notConnected","Not connected")}${o.crm_provider?` (${o.crm_provider})`:""}`:t("integrations.notConnected")})}),e.jsxs(f,{mb:2,children:[e.jsx(r,{colorScheme:"blue",onClick:()=>u("hubspot"),isLoading:m,isDisabled:o==null?void 0:o.crm_connected,children:t("integrations.connectHubspot","Connect HubSpot")}),e.jsx(r,{colorScheme:"orange",onClick:()=>u("salesforce"),isLoading:m,isDisabled:o==null?void 0:o.crm_connected,children:t("integrations.connectSalesforce","Connect Salesforce")}),e.jsx(r,{colorScheme:"red",onClick:y,isLoading:m,isDisabled:!(o!=null&&o.crm_connected),children:t("integrations.disconnect","Disconnect")})]})]}),e.jsxs(a,{bg:"white",p:6,borderRadius:"lg",border:"1px",borderColor:"gray.200",boxShadow:"md",mb:8,children:[e.jsx(l,{size:"md",mb:2,children:t("integrations.emailMarketing","Email Marketing")}),e.jsx(s,{fontSize:"sm",color:"gray.600",mb:2,children:t("integrations.emailDescription","Connect to email marketing tools like Mailchimp to sync contacts and automate campaigns.")}),e.jsx(f,{mb:2,children:e.jsx(r,{colorScheme:"green",onClick:()=>u("mailchimp"),isLoading:m,isDisabled:o==null?void 0:o.email_connected,children:t("integrations.connectMailchimp","Connect Mailchimp")})})]}),e.jsxs(a,{bg:"white",p:6,borderRadius:"lg",border:"1px",borderColor:"gray.200",boxShadow:"md",mb:8,children:[e.jsx(l,{size:"md",mb:2,children:t("integrations.zapier","Zapier & Automation")}),e.jsx(s,{fontSize:"sm",color:"gray.600",mb:2,children:t("integrations.zapierDescription","Connect LeadTap to thousands of apps using Zapier. Automate workflows and sync data across platforms.")}),e.jsx(r,{colorScheme:"yellow",as:"a",href:"https://zapier.com/apps/leadtap/integrations",target:"_blank",rel:"noopener noreferrer",mb:4,children:t("integrations.connectZapier","Connect Zapier")}),e.jsxs(a,{mt:4,mb:2,children:[e.jsx(l,{size:"sm",mb:1,children:"Available Webhook Events"}),e.jsxs(I,{align:"start",spacing:1,fontSize:"sm",children:[e.jsxs(s,{children:[e.jsx("b",{children:"lead.created"})," – Triggered when a new lead is created"]}),e.jsxs(s,{children:[e.jsx("b",{children:"job.completed"})," – Triggered when a job completes"]}),e.jsxs(s,{children:[e.jsx("b",{children:"lead.updated"})," – Triggered when a lead is updated"]}),e.jsxs(s,{children:[e.jsx("b",{children:"lead.deleted"})," – Triggered when a lead is deleted"]})]})]}),e.jsxs(a,{mt:4,mb:2,children:[e.jsx(l,{size:"sm",mb:1,children:"Your Webhook URL"}),e.jsxs(f,{children:[e.jsx(E,{value:g,isReadOnly:!0,size:"sm",width:"auto",isLoading:C}),e.jsx(r,{size:"sm",onClick:()=>{navigator.clipboard.writeText(g),c({title:"Copied to clipboard",status:"success"})},disabled:!g,children:"Copy"})]})]}),e.jsx(r,{colorScheme:"blue",size:"sm",mt:2,mb:2,onClick:z,isLoading:C,disabled:!g,children:"Test Webhook"}),k&&e.jsx(s,{fontSize:"sm",color:"gray.600",mt:1,children:k}),e.jsx(a,{mt:4,children:e.jsx(r,{as:"a",href:"/docs/api_examples#zapier",target:"_blank",rel:"noopener noreferrer",variant:"link",colorScheme:"blue",size:"sm",children:"Read Zapier Integration Guide"})})]}),e.jsxs(a,{bg:"white",p:6,borderRadius:"lg",border:"1px",borderColor:"gray.200",boxShadow:"md",mb:8,children:[e.jsx(l,{size:"md",mb:2,children:t("integrations.moreComing","More Integrations Coming Soon")}),e.jsx(s,{fontSize:"sm",color:"gray.600",children:t("integrations.moreDescription","We are working on more integrations. Let us know what you want to see!")})]}),e.jsx(r,{as:T,to:"/settings",variant:"outline",children:t("integrations.backToSettings","Back to Settings")})]})};export{Y as default};
//# sourceMappingURL=Integrations-_CNOyMew.js.map
