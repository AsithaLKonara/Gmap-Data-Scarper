import{U as B,W as X,j as e,X as E,Y,Z as k,_ as Z,$ as K,a0 as O,r as b,u as ee,b as A,a1 as se,C as J,F as re,m as te,B as P,H as y,d as w,e as W,G as N,f as p,a2 as j,a3 as m,S as f,h as S,i as v,k as T,V as G,a4 as I,v as R,T as ae,o as ne,p as Q,q as D,s as ie,t as z}from"./index-B6mPok09.js";import{S as oe}from"./stat-arrow-PWZS5VF2.js";const _=B(function(t,i){const{className:o,...c}=t,d=X();return e.jsx(E.div,{ref:i,className:Y("chakra-card__header",o),__css:d.header,...c})});function le(s,t,i){return(s-t)*100/(i-t)}k({"0%":{strokeDasharray:"1, 400",strokeDashoffset:"0"},"50%":{strokeDasharray:"400, 400",strokeDashoffset:"-100"},"100%":{strokeDasharray:"400, 400",strokeDashoffset:"-260"}});k({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}});const ce=k({"0%":{left:"-40%"},"100%":{left:"100%"}}),de=k({from:{backgroundPosition:"1rem 0"},to:{backgroundPosition:"0 0"}});function xe(s){const{value:t=0,min:i,max:o,valueText:c,getValueText:d,isIndeterminate:l,role:n="progressbar"}=s,a=le(t,i,o);return{bind:{"data-indeterminate":l?"":void 0,"aria-valuemax":o,"aria-valuemin":i,"aria-valuenow":l?void 0:t,"aria-valuetext":(()=>{if(t!=null)return typeof d=="function"?d(t,a):c})(),role:n},percent:a,value:t}}const[he,ue]=O({name:"ProgressStylesContext",errorMessage:`useProgressStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Progress />" `}),je=B((s,t)=>{const{min:i,max:o,value:c,isIndeterminate:d,role:l,...n}=s,a=xe({value:c,min:i,max:o,isIndeterminate:d,role:l}),g={height:"100%",...ue().filledTrack};return e.jsx(E.div,{ref:t,style:{width:`${a.percent}%`,...n.style},...a.bind,...n,__css:g})}),L=B((s,t)=>{var V;const{value:i,min:o=0,max:c=100,hasStripe:d,isAnimated:l,children:n,borderRadius:a,isIndeterminate:x,"aria-label":g,"aria-labelledby":r,"aria-valuetext":h,title:u,role:$,...F}=Z(s),C=K("Progress",s),H=a??((V=C.track)==null?void 0:V.borderRadius),M={animation:`${de} 1s linear infinite`},q={...!x&&d&&l&&M,...x&&{position:"absolute",willChange:"left",minWidth:"50%",animation:`${ce} 1s ease infinite normal none running`}},U={overflow:"hidden",position:"relative",...C.track};return e.jsx(E.div,{ref:t,borderRadius:H,__css:U,...F,children:e.jsxs(he,{value:C,children:[e.jsx(je,{"aria-label":g,"aria-labelledby":r,"aria-valuetext":h,min:o,max:c,value:i,isIndeterminate:x,css:q,borderRadius:H,title:u,role:$}),n]})})});L.displayName="Progress";const ye=()=>{const[s,t]=b.useState(null),[i,o]=b.useState(!1),[c,d]=b.useState("30"),l=ee(),n=A("white","gray.800"),a=A("gray.200","gray.700");b.useEffect(()=>{x()},[c]);const x=async()=>{o(!0);try{const r=await se();t(r)}catch(r){console.error(r),l({title:"Error",description:r.message,status:"error",duration:3e3})}finally{o(!1)}},g=async()=>{try{l({title:"Export Started",description:"Analytics data is being exported...",status:"info",duration:3e3})}catch(r){l({title:"Error",description:r.message,status:"error",duration:3e3})}};return i?e.jsx(J,{maxW:"container.xl",py:8,children:e.jsx(re,{justify:"center",py:8,children:e.jsx(te,{size:"lg"})})}):e.jsx(P,{minH:"100vh",bg:A("gray.100","gray.800"),"data-tour":"analytics-main",children:e.jsxs(J,{maxW:"container.xl",py:8,"data-tour":"analytics-content",children:[e.jsx(y,{size:"lg",mb:6,className:"gradient-text","data-tour":"analytics-title",children:"Analytics"}),e.jsxs(w,{justify:"space-between",mb:4,"data-tour":"analytics-actions",children:[e.jsx(W,{colorScheme:"blue",onClick:x,"data-tour":"analytics-refresh",children:"Refresh"}),e.jsx(W,{colorScheme:"green",onClick:g,"data-tour":"analytics-export",children:"Export Analytics"})]}),s&&e.jsxs(N,{templateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:6,children:[e.jsx(p,{"data-tour":"total-jobs-card",children:e.jsx(j,{bg:n,border:"1px",borderColor:a,children:e.jsx(m,{children:e.jsxs(f,{children:[e.jsx(S,{children:"Total Jobs"}),e.jsx(v,{children:s.totalJobs}),e.jsxs(T,{children:[e.jsx(oe,{type:"increase"}),s.monthlyGrowth,"%"]})]})})})}),e.jsx(p,{"data-tour":"success-rate-card",children:e.jsx(j,{bg:n,border:"1px",borderColor:a,children:e.jsx(m,{children:e.jsxs(f,{children:[e.jsx(S,{children:"Success Rate"}),e.jsxs(v,{children:[s.successRate,"%"]}),e.jsxs(T,{children:[s.completedJobs," completed, ",s.failedJobs," failed"]})]})})})}),e.jsx(p,{"data-tour":"total-leads-card",children:e.jsx(j,{bg:n,border:"1px",borderColor:a,children:e.jsx(m,{children:e.jsxs(f,{children:[e.jsx(S,{children:"Total Leads"}),e.jsx(v,{children:s.totalLeads}),e.jsxs(T,{children:["Conversion rate: ",s.conversionRate,"%"]})]})})})}),e.jsx(p,{"data-tour":"avg-response-time-card",children:e.jsx(j,{bg:n,border:"1px",borderColor:a,children:e.jsx(m,{children:e.jsxs(f,{children:[e.jsx(S,{children:"Avg Response Time"}),e.jsxs(v,{children:[s.averageResponseTime,"s"]}),e.jsxs(T,{children:["Daily queries: ",s.dailyQueries]})]})})})})]}),e.jsxs(N,{templateColumns:"repeat(auto-fit, minmax(400px, 1fr))",gap:6,children:[e.jsx(p,{"data-tour":"top-queries-card",children:e.jsxs(j,{bg:n,border:"1px",borderColor:a,children:[e.jsx(_,{children:e.jsx(y,{size:"md",children:"Top Search Queries"})}),e.jsx(m,{children:e.jsx(G,{spacing:3,align:"stretch",children:s==null?void 0:s.topQueries.map((r,h)=>{var u;return e.jsxs(P,{children:[e.jsxs(w,{justify:"space-between",mb:2,children:[e.jsx(I,{fontSize:"sm",fontWeight:"medium",children:r.query}),e.jsx(R,{colorScheme:"blue",children:r.count})]}),e.jsx(L,{value:r.count/(((u=s==null?void 0:s.topQueries[0])==null?void 0:u.count)||1)*100,size:"sm",colorScheme:"blue"})]},h)})})})]})}),e.jsx(p,{"data-tour":"lead-sources-card",children:e.jsxs(j,{bg:n,border:"1px",borderColor:a,children:[e.jsx(_,{children:e.jsx(y,{size:"md",children:"Lead Sources"})}),e.jsx(m,{children:e.jsx(G,{spacing:3,align:"stretch",children:s==null?void 0:s.leadSources.map((r,h)=>{var u;return e.jsxs(P,{children:[e.jsxs(w,{justify:"space-between",mb:2,children:[e.jsx(I,{fontSize:"sm",fontWeight:"medium",children:r.source}),e.jsx(R,{colorScheme:"green",children:r.count})]}),e.jsx(L,{value:r.count/(((u=s==null?void 0:s.leadSources[0])==null?void 0:u.count)||1)*100,size:"sm",colorScheme:"green"})]},h)})})})]})})]}),e.jsxs(j,{bg:n,border:"1px",borderColor:a,children:[e.jsx(_,{children:e.jsx(y,{size:"md",children:"Job Trends"})}),e.jsx(m,{children:e.jsxs(ae,{size:"sm",children:[e.jsx(ne,{children:e.jsxs(Q,{children:[e.jsx(D,{children:"Date"}),e.jsx(D,{children:"Jobs Created"}),e.jsx(D,{children:"Status"})]})}),e.jsx(ie,{children:s==null?void 0:s.jobTrends.map((r,h)=>e.jsxs(Q,{children:[e.jsx(z,{children:new Date(r.date).toLocaleDateString()}),e.jsx(z,{children:r.count}),e.jsx(z,{children:e.jsx(R,{colorScheme:"blue",children:"Active"})})]},h))})]})})]})]})})};export{ye as default};
//# sourceMappingURL=Analytics-ChuLSMXX.js.map
