import{r as a,j as e}from"./index-cuttc60L.js";import{adminGetAuditLogs as S}from"./index-CvLuV8mT.js";import{T as w,a as A,b as j,c as l,d as E,e as d}from"./table-BqXMkODy.js";const o=20,_=()=>{const[x,b]=a.useState([]),[y,u]=a.useState(!0),[m,p]=a.useState(null),[t,r]=a.useState(1),[h,f]=a.useState(0),[n,N]=a.useState(""),[i,T]=a.useState(""),[c,v]=a.useState(""),g=async()=>{u(!0),p(null);try{const s=await S({page:t,pageSize:o,action:n,adminEmail:i,targetType:c});b(s.results||[]),f(s.total||0)}catch(s){p(s.message||"Failed to load logs")}finally{u(!1)}};return a.useEffect(()=>{g()},[t,n,i,c]),e.jsx("div",{className:"max-w-6xl mx-auto py-8 px-4",children:e.jsxs("div",{className:"bg-white dark:bg-gray-900 p-8 rounded-lg shadow-md",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Admin Audit Log"}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("input",{className:"border px-2 py-1 rounded",placeholder:"Action",value:n,onChange:s=>{N(s.target.value),r(1)}}),e.jsx("input",{className:"border px-2 py-1 rounded",placeholder:"User Email",value:i,onChange:s=>{T(s.target.value),r(1)}}),e.jsx("input",{className:"border px-2 py-1 rounded",placeholder:"Target Type",value:c,onChange:s=>{v(s.target.value),r(1)}}),e.jsx("button",{className:"bg-blue-500 text-white px-3 py-1 rounded",onClick:()=>g(),children:"Search"})]}),y?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"})}):m?e.jsx("div",{className:"flex items-center p-4 mb-4 text-red-800 rounded-lg bg-red-50 dark:bg-gray-800 dark:text-red-400",children:m}):x.length===0?e.jsx("p",{className:"text-gray-500",children:"No audit logs found."}):e.jsxs(w,{children:[e.jsx(A,{children:e.jsxs(j,{children:[e.jsx(l,{children:"Action"}),e.jsx(l,{children:"User"}),e.jsx(l,{children:"Target"}),e.jsx(l,{children:"Details"}),e.jsx(l,{children:"Timestamp"})]})}),e.jsx(E,{children:x.map(s=>e.jsxs(j,{children:[e.jsx(d,{children:s.action}),e.jsx(d,{children:s.user_email||"-"}),e.jsxs(d,{children:[s.target_type,s.target_id?` #${s.target_id}`:""]}),e.jsx(d,{children:e.jsx("pre",{className:"whitespace-pre-wrap text-xs",children:s.details})}),e.jsx(d,{children:new Date(s.timestamp).toLocaleString()})]},s.id))})]}),e.jsxs("div",{className:"flex gap-2 mt-4 justify-end",children:[e.jsx("button",{className:"px-3 py-1 rounded bg-gray-200",onClick:()=>r(s=>Math.max(1,s-1)),disabled:t===1,children:"Prev"}),e.jsxs("span",{children:["Page ",t," / ",Math.ceil(h/o)||1]}),e.jsx("button",{className:"px-3 py-1 rounded bg-gray-200",onClick:()=>r(s=>s+1),disabled:t>=Math.ceil(h/o),children:"Next"})]})]})})};export{_ as default};
//# sourceMappingURL=AdminAuditLog-qKQILVEN.js.map
